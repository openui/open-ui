<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Select - Open UI Base</title>
    <link rel="stylesheet" href="base.css" />
    <style>
      oui-option.hidden {
        display: none;
      }
    </style>
  </head>
  <body>
    <h1>Select - Open UI Base with Styles + Filter</h1>
    <p>This select has a lot going on. Not only does it leverage the button-container 
      slot but it also inserts an input and removes keyboard propogation that begins there. 
      Then upon typing into the input the list of options is filtered of options that don't 
      match. This provides a good user experience for selecting from a large list.
    </p> 
    
    <oui-select>
            <div slot="button-container" part="button">
              <input id="filter-search" />
            </div>
            <oui-listbox>
              <oui-option value="0">-- Select Country --</oui-option>
              <oui-option value="United States">United States</oui-option>
              <oui-option value="Canada">Canada</oui-option>
              <oui-option value="Albania">Albania</oui-option>
              <oui-option value="Algeria">Algeria</oui-option>
              <oui-option value="American Samoa">American Samoa</oui-option>
              <oui-option value="Andorra">Andorra</oui-option>
              <oui-option value="Angola">Angola</oui-option>
              <oui-option value="Anguilla">Anguilla</oui-option>
              <oui-option value="Antarctica">Antarctica</oui-option>
              <oui-option value="Antigua">Antigua</oui-option>
              <oui-option value="Argentina">Argentina</oui-option>
              <oui-option value="Armenia">Armenia</oui-option>
              <oui-option value="Aruba">Aruba</oui-option>
              <oui-option value="Australia">Australia</oui-option>
              <oui-option value="Austria">Austria</oui-option>
              <oui-option value="Azerbaijani">Azerbaijani</oui-option>
              <oui-option value="Bahamas">Bahamas</oui-option>
              <oui-option value="Bahrain">Bahrain</oui-option>
              <oui-option value="Bangladesh">Bangladesh</oui-option>
              <oui-option value="Barbados">Barbados</oui-option>
              <oui-option value="Belarus">Belarus</oui-option>
              <oui-option value="Netherlands">Belgium</oui-option>
              <oui-option value="Belize">Belize</oui-option>
              <oui-option value="Benin">Benin</oui-option>
              <oui-option value="Bermuda">Bermuda</oui-option>
              <oui-option value="Bhutan">Bhutan</oui-option>
              <oui-option value="Bolivia">Bolivia</oui-option>
              <oui-option value="Bosnia-Hercegovina">Bosnia-Hercegovina</oui-option>
              <oui-option value="Botswana">Botswana</oui-option>
              <oui-option value="Bouvet Island">Bouvet Island</oui-option>
              <oui-option value="Brazil">Brazil</oui-option>
              <oui-option value="British IOT">British IOT</oui-option>
              <oui-option value="Brunei Darussalam">Brunei Darussalam</oui-option>
              <oui-option value="Bulgaria">Bulgaria</oui-option>
              <oui-option value="Burkina Faso">Burkina Faso</oui-option>
              <oui-option value="Burundi">Burundi</oui-option>
              <oui-option value="Cambodia">Cambodia</oui-option>
              <oui-option value="Cameroon">Cameroon</oui-option>
              <oui-option value="Cape Verde">Cape Verde</oui-option>
              <oui-option value="Cayman Islands">Cayman Islands</oui-option>
              <oui-option value="Central African Rep">Central African Rep</oui-option>
              <oui-option value="Chad">Chad</oui-option>
              <oui-option value="Chile">Chile</oui-option>
              <oui-option value="China">China</oui-option>
              <oui-option value="Christmas Island">Christmas Island</oui-option>
              <oui-option value="Cocos Islands">Cocos Islands</oui-option>
              <oui-option value="Colombia">Colombia</oui-option>
              <oui-option value="Comoros">Comoros</oui-option>
              <oui-option value="Congo">Congo</oui-option>
              <oui-option value="Cook Islands">Cook Islands</oui-option>
              <oui-option value="Costa Rica">Costa Rica</oui-option>
              <oui-option value="Croatia">Croatia</oui-option>
              <oui-option value="Cyprus">Cyprus</oui-option>
              <oui-option value="Czech Republic">Czech Republic</oui-option>
              <oui-option value="Denmark">Denmark</oui-option>
              <oui-option value="Djibouti">Djibouti</oui-option>
              <oui-option value="Dominica">Dominica</oui-option>
              <oui-option value="Dominican Republic">Dominican Republic</oui-option>
              <oui-option value="East Timor">East Timor</oui-option>
              <oui-option value="Ecuador">Ecuador</oui-option>
              <oui-option value="Egypt">Egypt</oui-option>
              <oui-option value="El Salvador">El Salvador</oui-option>
              <oui-option value="Equatorial Guinea">Equatorial Guinea</oui-option>
              <oui-option value="Eritrea">Eritrea</oui-option>
              <oui-option value="Estonia">Estonia</oui-option>
              <oui-option value="Ethiopia">Ethiopia</oui-option>
              <oui-option value="Faeroe Islands">Faeroe Islands</oui-option>
              <oui-option value="Falkland Islands">Falkland Islands</oui-option>
              <oui-option value="Fiji">Fiji</oui-option>
              <oui-option value="Finland">Finland</oui-option>
              <oui-option value="France">France</oui-option>
              <oui-option value="French Guiana">French Guiana</oui-option>
              <oui-option value="French Polynesia">French Polynesia</oui-option>
              <oui-option value="French Southern">French Southern</oui-option>
              <oui-option value="French Southern Ter">French Southern Ter</oui-option>
              <oui-option value="Gabon">Gabon</oui-option>
              <oui-option value="Gambia">Gambia</oui-option>
              <oui-option value="Georgia">Georgia</oui-option>
              <oui-option value="Germany">Germany</oui-option>
              <oui-option value="Ghana">Ghana</oui-option>
              <oui-option value="Gibraltar">Gibraltar</oui-option>
              <oui-option value="Greece">Greece</oui-option>
              <oui-option value="Greenland">Greenland</oui-option>
              <oui-option value="Grenada">Grenada</oui-option>
              <oui-option value="Guadeloupe">Guadeloupe</oui-option>
              <oui-option value="Guam">Guam</oui-option>
              <oui-option value="Guatemala">Guatemala</oui-option>
              <oui-option value="Guinea">Guinea</oui-option>
              <oui-option value="Guinea-Bissau">Guinea-Bissau</oui-option>
              <oui-option value="Guyana">Guyana</oui-option>
              <oui-option value="Haiti">Haiti</oui-option>
              <oui-option value="Heard">Heard</oui-option>
              <oui-option value="Honduras">Honduras</oui-option>
              <oui-option value="Hong Kong">Hong Kong</oui-option>
              <oui-option value="Hungary">Hungary</oui-option>
              <oui-option value="Iceland">Iceland</oui-option>
              <oui-option value="India">India</oui-option>
              <oui-option value="Indonesia">Indonesia</oui-option>
              <oui-option value="Ireland">Ireland</oui-option>
              <oui-option value="Israel">Israel</oui-option>
              <oui-option value="Italy">Italy</oui-option>
              <oui-option value="Ivory Coast">Ivory Coast</oui-option>
              <oui-option value="Jamaica">Jamaica</oui-option>
              <oui-option value="Japan">Japan</oui-option>
              <oui-option value="Jordan">Jordan</oui-option>
              <oui-option value="Kazakhstan">Kazakhstan</oui-option>
              <oui-option value="Kenya">Kenya</oui-option>
              <oui-option value="Kiribati">Kiribati</oui-option>
              <oui-option value="Kuwait">Kuwait</oui-option>
              <oui-option value="Kyrgyzstan">Kyrgyzstan</oui-option>
              <oui-option value="Laos">Laos</oui-option>
              <oui-option value="Latvia">Latvia</oui-option>
              <oui-option value="Lebanon">Lebanon</oui-option>
              <oui-option value="Lesotho">Lesotho</oui-option>
              <oui-option value="Liberia">Liberia</oui-option>
              <oui-option value="Liechtenstein">Liechtenstein</oui-option>
              <oui-option value="Lithuania">Lithuania</oui-option>
              <oui-option value="Luxembourg">Luxembourg</oui-option>
              <oui-option value="Macau">Macau</oui-option>
              <oui-option value="Macedonia">Macedonia</oui-option>
              <oui-option value="Madagascar">Madagascar</oui-option>
              <oui-option value="Malawi">Malawi</oui-option>
              <oui-option value="Malaysia">Malaysia</oui-option>
              <oui-option value="Maldives">Maldives</oui-option>
              <oui-option value="Mali">Mali</oui-option>
              <oui-option value="Malta">Malta</oui-option>
              <oui-option value="Marshall Islands">Marshall Islands</oui-option>
              <oui-option value="Martinique">Martinique</oui-option>
              <oui-option value="Mauritania">Mauritania</oui-option>
              <oui-option value="Mauritius">Mauritius</oui-option>
              <oui-option value="Mayotte">Mayotte</oui-option>
              <oui-option value="Mexico">Mexico</oui-option>
              <oui-option value="Micronesia">Micronesia</oui-option>
              <oui-option value="MNP">MNP</oui-option>
              <oui-option value="Moldova">Moldova</oui-option>
              <oui-option value="Monaco">Monaco</oui-option>
              <oui-option value="Mongolia">Mongolia</oui-option>
              <oui-option value="Montserrat">Montserrat</oui-option>
              <oui-option value="Morocco">Morocco</oui-option>
              <oui-option value="Mozambique">Mozambique</oui-option>
              <oui-option value="Myanmar">Myanmar</oui-option>
              <oui-option value="Namibia">Namibia</oui-option>
              <oui-option value="Nauru">Nauru</oui-option>
              <oui-option value="Nepal">Nepal</oui-option>
              <oui-option value="NER">NER</oui-option>
              <oui-option value="Netherlands">Netherlands</oui-option>
              <oui-option value="Neutral Zone">Neutral Zone</oui-option>
              <oui-option value="New Caledonia">New Caledonia</oui-option>
              <oui-option value="New Zealand">New Zealand</oui-option>
              <oui-option value="Nicaragua">Nicaragua</oui-option>
              <oui-option value="Nigeria">Nigeria</oui-option>
              <oui-option value="Niue">Niue</oui-option>
              <oui-option value="Norfolk Island">Norfolk Island</oui-option>
              <oui-option value="North Korea">North Korea</oui-option>
              <oui-option value="Norway">Norway</oui-option>
              <oui-option value="Oman">Oman</oui-option>
              <oui-option value="Pakistan">Pakistan</oui-option>
              <oui-option value="Palau">Palau</oui-option>
              <oui-option value="Panama">Panama</oui-option>
              <oui-option value="Papua New Guinea">Papua New Guinea</oui-option>
              <oui-option value="Paraguay">Paraguay</oui-option>
              <oui-option value="Peru">Peru</oui-option>
              <oui-option value="Philippines">Philippines</oui-option>
              <oui-option value="Pitcairn">Pitcairn</oui-option>
              <oui-option value="Poland">Poland</oui-option>
              <oui-option value="Portugal">Portugal</oui-option>
              <oui-option value="Puerto Rico">Puerto Rico</oui-option>
              <oui-option value="Qatar">Qatar</oui-option>
              <oui-option value="Reunion">Reunion</oui-option>
              <oui-option value="Romania">Romania</oui-option>
              <oui-option value="Russia">Russia</oui-option>
              <oui-option value="Rwanda">Rwanda</oui-option>
              <oui-option value="Saint Helena">Saint Helena</oui-option>
              <oui-option value="Saint Lucia">Saint Lucia</oui-option>
              <oui-option value="Saint Pierre">Saint Pierre</oui-option>
              <oui-option value="Saint Vincent">Saint Vincent</oui-option>
              <oui-option value="Samoa">Samoa</oui-option>
              <oui-option value="San Marino">San Marino</oui-option>
              <oui-option value="Saudi Arabia">Saudi Arabia</oui-option>
              <oui-option value="Scotland">Scotland</oui-option>
              <oui-option value="Senegal">Senegal</oui-option>
              <oui-option value="Seychelles">Seychelles</oui-option>
              <oui-option value="Sierra Leone">Sierra Leone</oui-option>
              <oui-option value="Singapore">Singapore</oui-option>
              <oui-option value="Slovak Republic">Slovak Republic</oui-option>
              <oui-option value="Slovenia">Slovenia</oui-option>
              <oui-option value="Solomon Islands">Solomon Islands</oui-option>
              <oui-option value="Somali Democratic">Somali Democratic</oui-option>
              <oui-option value="South Africa">South Africa</oui-option>
              <oui-option value="South Georgia">South Georgia</oui-option>
              <oui-option value="South Korea">South Korea</oui-option>
              <oui-option value="Spain">Spain</oui-option>
              <oui-option value="Sri Lanka">Sri Lanka</oui-option>
              <oui-option value="St. Kitts and Nevis">St. Kitts and Nevis</oui-option>
              <oui-option value="STP">STP</oui-option>
              <oui-option value="Suriname">Suriname</oui-option>
              <oui-option value="Svalbard">Svalbard</oui-option>
              <oui-option value="Swaziland">Swaziland</oui-option>
              <oui-option value="Sweden">Sweden</oui-option>
              <oui-option value="Switzerland">Switzerland</oui-option>
              <oui-option value="Syria">Syria</oui-option>
              <oui-option value="Taiwan">Taiwan</oui-option>
              <oui-option value="Tajikistan">Tajikistan</oui-option>
              <oui-option value="Tanzania">Tanzania</oui-option>
              <oui-option value="TCA">TCA</oui-option>
              <oui-option value="Thailand">Thailand</oui-option>
              <oui-option value="Toga">Toga</oui-option>
              <oui-option value="Togolese">Togolese</oui-option>
              <oui-option value="Tokelau">Tokelau</oui-option>
              <oui-option value="Tongo">Tongo</oui-option>
              <oui-option value="Trinidad and Tobago">Trinidad and Tobago</oui-option>
              <oui-option value="Tunisia">Tunisia</oui-option>
              <oui-option value="Turkey">Turkey</oui-option>
              <oui-option value="Turkmenistan">Turkmenistan</oui-option>
              <oui-option value="Tuvalu">Tuvalu</oui-option>
              <oui-option value="Uganda">Uganda</oui-option>
              <oui-option value="Ukraine">Ukraine</oui-option>
              <oui-option value="United Arab">United Arab</oui-option>
              <oui-option value="United Kingdom">United Kingdom</oui-option>
              <oui-option value="Upper Volta">Upper Volta</oui-option>
              <oui-option value="Uruguay">Uruguay</oui-option>
              <oui-option value="USSR(Former)">USSR(Former)</oui-option>
              <oui-option value="Uzbekistan">Uzbekistan</oui-option>
              <oui-option value="Vanuatu">Vanuatu</oui-option>
              <oui-option value="Vatican City">Vatican City</oui-option>
              <oui-option value="Venezuela">Venezuela</oui-option>
              <oui-option value="VI, British">VI, British</oui-option>
              <oui-option value="Viet Nam">Viet Nam</oui-option>
              <oui-option value="Virgin Islands, USA">Virgin Islands, USA</oui-option>
              <oui-option value="Western Sahara">Western Sahara</oui-option>
              <oui-option value="WLF">WLF</oui-option>
              <oui-option value="Yemen">Yemen</oui-option>
              <oui-option value="Yugoslavia">Yugoslavia</oui-option>
              <oui-option value="Zaire">Zaire</oui-option>
              <oui-option value="Zambia">Zambia</oui-option>
              <oui-option value="Zimbabwe">Zimbabwe</oui-option>
            </oui-listbox>
        </oui-select>

      <script>
        let select = document.querySelector('oui-select');
        let searchInput = document.querySelector("#filter-search");
        let options = document.querySelectorAll('oui-option');

        // This produces an interesting issue due to initial focus
        // worth discussing
        searchInput.addEventListener("click", e => {
          e.stopPropagation();
          select.toggleAttribute('open');
        });

        // Handle key input
        let filterValue = '';
        searchInput.addEventListener('keydown', (e) => {
          e.stopImmediatePropagation();
          filterValue = `${filterValue}${e.key}`;
          this.value = filterValue;
          this.textContent = filterValue;
          filterOptions(filterValue, options)
        });

        function filterOptions(filterValue, options) {
          filterValue = regexEscape(filterValue);
          let pattern = `^(${filterValue})`;
          let re = new RegExp(pattern, "gi");
  
          options.forEach(option => {
                let matches = option.value.match(re);
                if (!matches) {
                  option.classList.add('hidden');
                }
                else {
                  option.classList.remove('hidden');
                }
          });
      }

      function regexEscape(str) {
          return str.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&')
      }
      </script>

    <script src="/dist/bundle.js"></script>
  </body>
</html>